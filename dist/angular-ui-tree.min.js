!function(){"use strict";angular.module("ui.tree",[]).constant("treeConfig",{treeClass:"angular-ui-tree",emptyTreeClass:"angular-ui-tree-empty",dropzoneClass:"angular-ui-tree-dropzone",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeholderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",defaultCollapsed:!1,appendChildOnHover:!0,dragMoveSensitivity:15})}(),function(){"use strict";angular.module("ui.tree").controller("TreeHandleController",["$scope","$element",function(e,n){(this.scope=e).$element=n,e.$nodeScope=null,e.$type="uiTreeHandle"}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodeController",["$scope","$element",function(t,o){(this.scope=t).$element=o,t.$modelValue=null,t.$parentNodeScope=null,t.$childNodesScope=null,t.$parentNodesScope=null,t.$treeScope=null,t.$handleScope=null,t.$type="uiTreeNode",t.$$allowNodeDrop=!1,t.collapsed=!1,t.expandOnHover=!1,t.init=function(e){var n=e[0];t.$treeScope=e[1]?e[1].scope:null,t.$parentNodeScope=n.scope.$nodeScope,t.$modelValue=n.scope.$modelValue[t.$index],t.$parentNodesScope=n.scope,n.scope.initSubNode(t),o.on("$destroy",function(){n.scope.destroySubNode(t)})},t.index=function(){return t.$parentNodesScope.$modelValue.indexOf(t.$modelValue)},t.dragEnabled=function(){return!(t.$treeScope&&!t.$treeScope.dragEnabled)},t.isSibling=function(e){return t.$parentNodesScope==e.$parentNodesScope},t.isChild=function(e){var n=t.childNodes();return n&&-1<n.indexOf(e)},t.prev=function(){var e=t.index();return 0<e?t.siblings()[e-1]:null},t.siblings=function(){return t.$parentNodesScope.childNodes()},t.childNodesCount=function(){return t.childNodes()?t.childNodes().length:0},t.hasChild=function(){return 0<t.childNodesCount()},t.childNodes=function(){return t.$childNodesScope&&t.$childNodesScope.$modelValue?t.$childNodesScope.childNodes():null},t.accept=function(e,n){return t.$childNodesScope&&t.$childNodesScope.$modelValue&&t.$childNodesScope.accept(e,n)},t.remove=function(){return t.$parentNodesScope.removeNode(t)},t.toggle=function(){t.collapsed=!t.collapsed,t.$treeScope.$callbacks.toggle(t.collapsed,t)},t.collapse=function(){t.collapsed=!0},t.expand=function(){t.collapsed=!1},t.depth=function(){var e=t.$parentNodeScope;return e?e.depth()+1:1},t.maxSubDepth=function(){return t.$childNodesScope?function e(n){if(!n)return 0;var t,o,l=0,r=n.childNodes();if(!r||0===r.length)return 0;for(o=r.length-1;0<=o;o--)t=1+e(r[o]),l=Math.max(l,t);return l}(t.$childNodesScope):0}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodesController",["$scope","$element","$timeout",function(t,e,o){(this.scope=t).$element=e,t.$modelValue=null,t.$nodeScope=null,t.$treeScope=null,t.$type="uiTreeNodes",t.$nodesMap={},t.nodropEnabled=!1,t.maxDepth=0,t.cloneEnabled=!1,t.initSubNode=function(e){if(!e.$modelValue)return null;t.$nodesMap[e.$modelValue.$$hashKey]=e},t.destroySubNode=function(e){if(!e.$modelValue)return null;t.$nodesMap[e.$modelValue.$$hashKey]=null},t.accept=function(e,n){return t.$treeScope.$callbacks.accept(e,t,n)},t.beforeDrag=function(e){return t.$treeScope.$callbacks.beforeDrag(e)},t.isParent=function(e){return e.$parentNodesScope==t},t.hasChild=function(){return 0<t.$modelValue.length},t.removeNode=function(e){var n=t.$modelValue.indexOf(e.$modelValue);return-1<n?(o(function(){t.$modelValue.splice(n,1)[0]}),t.$treeScope.$callbacks.removed(e)):null},t.insertNode=function(e,n){o(function(){t.$modelValue.splice(e,0,n)})},t.childNodes=function(){var e,n=[];if(t.$modelValue)for(e=0;e<t.$modelValue.length;e++)n.push(t.$nodesMap[t.$modelValue[e].$$hashKey]);return n},t.depth=function(){return t.$nodeScope?t.$nodeScope.depth():0},t.outOfDepth=function(e){var n=t.maxDepth||t.$treeScope.maxDepth;return 0<n&&t.depth()+e.maxSubDepth()+1>n}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeController",["$scope","$element",function(n,e){(this.scope=n).$element=e,n.$nodesScope=null,n.$type="uiTree",n.$emptyElm=null,n.$dropzoneElm=null,n.$callbacks=null,n.dragEnabled=!0,n.emptyPlaceholderEnabled=!0,n.maxDepth=0,n.dragDelay=0,n.cloneEnabled=!1,n.nodropEnabled=!1,n.dropzoneEnabled=!1,n.isEmpty=function(){return n.$nodesScope&&n.$nodesScope.$modelValue&&0===n.$nodesScope.$modelValue.length},n.place=function(e){n.$nodesScope.$element.append(e),n.$emptyElm.remove()},this.resetEmptyElement=function(){n.$nodesScope.$modelValue&&0!==n.$nodesScope.$modelValue.length||!n.emptyPlaceholderEnabled?n.$emptyElm.remove():e.append(n.$emptyElm)},this.resetDropzoneElement=function(){n.$nodesScope.$modelValue&&0===n.$nodesScope.$modelValue.length||!n.dropzoneEnabled?n.$dropzoneElm.remove():e.append(n.$dropzoneElm)},n.resetEmptyElement=this.resetEmptyElement,n.resetDropzoneElement=this.resetDropzoneElement}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTree",["treeConfig","$window",function(a,i){return{restrict:"A",scope:!0,controller:"TreeController",link:function(t,e,n,o){var l={accept:null,beforeDrag:null},r={};angular.extend(r,a),r.treeClass&&e.addClass(r.treeClass),"table"===e.prop("tagName").toLowerCase()?(t.$emptyElm=angular.element(i.document.createElement("tr")),e=0<(e=e.find("tr")).length?angular.element(e).children().length:1e6,e=angular.element(i.document.createElement("td")).attr("colspan",e),t.$emptyElm.append(e)):(t.$emptyElm=angular.element(i.document.createElement("div")),t.$dropzoneElm=angular.element(i.document.createElement("div"))),r.emptyTreeClass&&t.$emptyElm.addClass(r.emptyTreeClass),r.dropzoneClass&&t.$dropzoneElm.addClass(r.dropzoneClass),t.$watch("$nodesScope.$modelValue.length",function(e){angular.isNumber(e)&&(o.resetEmptyElement(),o.resetDropzoneElement())},!0),t.$watch(n.dragEnabled,function(e){"boolean"==typeof e&&(t.dragEnabled=e)}),t.$watch(n.emptyPlaceholderEnabled,function(e){"boolean"==typeof e&&(t.emptyPlaceholderEnabled=e,o.resetEmptyElement())}),t.$watch(n.nodropEnabled,function(e){"boolean"==typeof e&&(t.nodropEnabled=e)}),t.$watch(n.dropzoneEnabled,function(e){"boolean"==typeof e&&(t.dropzoneEnabled=e,o.resetDropzoneElement())}),t.$watch(n.cloneEnabled,function(e){"boolean"==typeof e&&(t.cloneEnabled=e)}),t.$watch(n.maxDepth,function(e){"number"==typeof e&&(t.maxDepth=e)}),t.$watch(n.dragDelay,function(e){"number"==typeof e&&(t.dragDelay=e)}),l.accept=function(e,n,t){return!(n.nodropEnabled||n.$treeScope.nodropEnabled||n.outOfDepth(e))},l.beforeDrag=function(e){return!0},l.expandTimeoutStart=function(){},l.expandTimeoutCancel=function(){},l.expandTimeoutEnd=function(){},l.removed=function(e){},l.dropped=function(e){},l.dragStart=function(e){},l.dragMove=function(e){},l.dragStop=function(e){},l.beforeDrop=function(e){},l.toggle=function(e,n){},t.$watch(n.uiTree,function(e,n){angular.forEach(e,function(e,n){l[n]&&"function"==typeof e&&(l[n]=e)}),t.$callbacks=l},!0)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeHandle",["treeConfig",function(r){return{require:"^uiTreeNode",restrict:"A",scope:!0,controller:"TreeHandleController",link:function(e,n,t,o){var l={};angular.extend(l,r),l.handleClass&&n.addClass(l.handleClass),e!=o.scope&&(e.$nodeScope=o.scope,o.scope.$handleScope=e)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","UiTreeHelper","$window","$document","$timeout","$q",function(z,I,P,L,W,q){return{require:["^uiTreeNodes","^uiTree"],restrict:"A",controller:"TreeNodeController",link:function(m,a,n,e){var f,h,$,g,i,b,v,S,N,E,y,t,o,l,r,d,c,s,u,p,x,C,T,D,w,X,H,O,Y={},A="ontouchstart"in window,V=null,M=document.body,k=document.documentElement;angular.extend(Y,z),Y.nodeClass&&a.addClass(Y.nodeClass),m.init(e),m.collapsed=!!I.getNodeAttribute(m,"collapsed")||z.defaultCollapsed,m.expandOnHover=!!I.getNodeAttribute(m,"expandOnHover"),m.scrollContainer=I.getNodeAttribute(m,"scrollContainer")||n.scrollContainer||null,m.sourceOnly=m.nodropEnabled||m.$treeScope.nodropEnabled,m.$watch(n.collapsed,function(e){"boolean"==typeof e&&(m.collapsed=e)}),m.$watch("collapsed",function(e){I.setNodeAttribute(m,"collapsed",e),n.$set("collapsed",e)}),m.$watch(n.expandOnHover,function(e){"boolean"!=typeof e&&"number"!=typeof e||(m.expandOnHover=e)}),m.$watch("expandOnHover",function(e){I.setNodeAttribute(m,"expandOnHover",e),n.$set("expandOnHover",e)}),n.$observe("scrollContainer",function(e){"string"==typeof e&&(m.scrollContainer=e)}),m.$watch("scrollContainer",function(e){I.setNodeAttribute(m,"scrollContainer",e),n.$set("scrollContainer",e),v=document.querySelector(e)}),m.$on("angular-ui-tree:collapse-all",function(){m.collapsed=!0}),m.$on("angular-ui-tree:expand-all",function(){m.collapsed=!1}),t=function(e){if((A||2!==e.button&&3!==e.which)&&!(e.uiTreeDragging||e.originalEvent&&e.originalEvent.uiTreeDragging)){var n,t,o,l=angular.element(e.target),r=I.treeNodeHandlerContainerOfElement(l);if(r&&(l=angular.element(r)),n=a.clone(),o=I.elementIsTreeNode(l),r=I.elementIsTreeNodeHandle(l),(o||r)&&!(o&&I.elementContainsTreeNodeHandler(l)||"input"==(t=l.prop("tagName").toLowerCase())||"textarea"==t||"button"==t||"select"==t)){for(w=angular.element(e.target),X=w[0].attributes["ui-tree"];w&&w[0]&&w[0]!==a&&!X;){if(w[0].attributes&&(X=w[0].attributes["ui-tree"]),I.nodrag(w))return;w=w.parent()}m.beforeDrag(m)&&(e.uiTreeDragging=!0,e.originalEvent&&(e.originalEvent.uiTreeDragging=!0),e.preventDefault(),l=I.eventObj(e),f=!0,h=I.dragInfo(m),H=h.source.$treeScope.$id,"tr"===(t=a.prop("tagName")).toLowerCase()?(g=angular.element(P.document.createElement(t)),e=angular.element(P.document.createElement("td")).addClass(Y.placeholderClass).attr("colspan",a[0].children.length),g.append(e)):g=angular.element(P.document.createElement(t)).addClass(Y.placeholderClass),i=angular.element(P.document.createElement(t)),Y.hiddenClass&&i.addClass(Y.hiddenClass),$=I.positionStarted(l,a),g.css("height",a.prop("offsetHeight")+"px"),(b=angular.element(P.document.createElement(m.$parentNodesScope.$element.prop("tagName"))).addClass(m.$parentNodesScope.$element.attr("class")).addClass(Y.dragClass)).css("width",I.width(a)+"px"),b.css("z-index",9999),(t=(a[0].querySelector(".angular-ui-tree-handle")||a[0]).currentStyle)&&(document.body.setAttribute("ui-tree-cursor",L.find("body").css("cursor")||""),L.find("body").css({cursor:t.cursor+"!important"})),m.sourceOnly&&g.css("display","none"),a.after(g),a.after(i),h.isClone()&&m.sourceOnly?b.append(n):b.append(a),L.find("body").append(b),b.css({left:l.pageX-$.offsetX+"px",top:l.pageY-$.offsetY+"px"}),N={placeholder:g,dragging:b},x(),m.$apply(function(){m.$treeScope.$callbacks.dragStart(h.eventArgs(N,$))}),E=Math.max(M.scrollHeight,M.offsetHeight,k.clientHeight,k.scrollHeight,k.offsetHeight),y=Math.max(M.scrollWidth,M.offsetWidth,k.clientWidth,k.scrollWidth,k.offsetWidth))}}},o=function(e){var n,t,o,l,r,a,i,d,c,s,u,p=I.eventObj(e);if(b)if(e.preventDefault(),P.getSelection?P.getSelection().removeAllRanges():P.document.selection&&P.document.selection.empty(),n=p.pageX-$.offsetX,l=p.pageY-$.offsetY,E<(l=l<0?0:l)+10&&(l=E-10),y<(n=n<0?0:n)+10&&(n=y-10),b.css({left:n+"px",top:l+"px"}),v?(l=v.getBoundingClientRect(),o=(t=v.scrollTop)+v.clientHeight,l.bottom<p.clientY&&o<v.scrollHeight&&(i=Math.min(v.scrollHeight-o,10),v.scrollTop+=i),l.top>p.clientY&&0<t&&(d=Math.min(t,10),v.scrollTop-=d)):((o=(t=window.pageYOffset||P.document.documentElement.scrollTop)+(window.innerHeight||P.document.clientHeight||P.document.clientHeight))<p.pageY&&o<E&&(i=Math.min(E-o,10),window.scrollBy(0,i)),t>p.pageY&&(d=Math.min(t,10),window.scrollBy(0,-d))),I.positionMoved(e,$,f),f)f=!1;else{if(d=p.pageX-(P.pageXOffset||P.document.body.scrollLeft||P.document.documentElement.scrollLeft)-(P.document.documentElement.clientLeft||0),e=p.pageY-(P.pageYOffset||P.document.body.scrollTop||P.document.documentElement.scrollTop)-(P.document.documentElement.clientTop||0),angular.isFunction(b.hide)?b.hide():(r=b[0].style.display,b[0].style.display="none"),P.document.elementFromPoint(d,e),e=angular.element(P.document.elementFromPoint(d,e)),(D=I.treeNodeHandlerContainerOfElement(e))&&(e=angular.element(D)),angular.isFunction(b.show)?b.show():b[0].style.display=r,I.elementIsTree(e)?a=e.controller("uiTree").scope:I.elementIsTreeNodeHandle(e)?a=e.controller("uiTreeHandle").scope:I.elementIsTreeNode(e)?a=e.controller("uiTreeNode").scope:I.elementIsTreeNodes(e)||I.elementIsPlaceholder(e)?a=e.controller("uiTreeNodes").scope:I.elementIsDropzone(e)?(a=e.controller("uiTree").scope,u=!0):e.controller("uiTreeNode")&&(a=e.controller("uiTreeNode").scope),a&&a.$treeScope&&a.$treeScope.$id&&a.$treeScope.$id===H&&$.dirAx)0<$.distX&&(s=h.prev())&&!s.collapsed&&s.accept(m,s.childNodesCount())&&((!h.deltaDistX||h.deltaDistX<0)&&(h.deltaDistX=0),h.deltaDistX+=$.distX,h.deltaDistX>Y.dragMoveSensitivity&&(s.$childNodesScope.$element.append(g),h.moveTo(s.$childNodesScope,s.childNodes(),s.childNodesCount()),h.deltaDistX=0)),$.distX<0&&(h.next()||(c=h.parentNode())&&c.$parentNodesScope.accept(m,c.index()+1)&&((!h.deltaDistX||0<h.deltaDistX)&&(h.deltaDistX=0),h.deltaDistX+=$.distX,h.deltaDistX<-Y.dragMoveSensitivity&&(c.$element.after(g),h.moveTo(c.$parentNodesScope,c.siblings(),c.index()+1),h.deltaDistX=0)));else{if(s=!1,!a)return;if(!a.$treeScope||a.$parent.nodropEnabled||a.$treeScope.nodropEnabled||g.css("display",""),"uiTree"===a.$type&&a.dragEnabled&&(s=a.isEmpty()),"uiTreeNode"!==(a="uiTreeHandle"===a.$type?a.$nodeScope:a).$type&&!s&&!u)return void(Y.appendChildOnHover&&!h.next()&&S&&((c=h.parentNode()).$element.after(g),h.moveTo(c.$parentNodesScope,c.siblings(),c.index()+1),S=!1));V&&g.parent()[0]!=V.$element[0]&&(V.resetEmptyElement(),V.resetDropzoneElement(),V=null),s?(V=a).$nodesScope.accept(m,0)&&h.moveTo(a.$nodesScope,a.$nodesScope.childNodes(),0):u?(V=a).$nodesScope.accept(m,a.$nodesScope.childNodes().length)&&h.moveTo(a.$nodesScope,a.$nodesScope.childNodes(),a.$nodesScope.childNodes().length):a.dragEnabled()&&(angular.isDefined(m.expandTimeoutOn)&&m.expandTimeoutOn!==a.id&&(W.cancel(m.expandTimeout),delete m.expandTimeout,delete m.expandTimeoutOn,m.$callbacks.expandTimeoutCancel()),a.collapsed&&(!0===m.expandOnHover||angular.isNumber(m.expandOnHover)&&0===m.expandOnHover?(a.collapsed=!1,a.$treeScope.$callbacks.toggle(!1,a)):!1!==m.expandOnHover&&angular.isNumber(m.expandOnHover)&&0<m.expandOnHover&&angular.isUndefined(m.expandTimeoutOn)&&(m.expandTimeoutOn=a.$id,m.$callbacks.expandTimeoutStart(),m.expandTimeout=W(function(){m.$callbacks.expandTimeoutEnd(),a.collapsed=!1,a.$treeScope.$callbacks.toggle(!1,a)},m.expandOnHover))),e=a.$element,c=I.offset(e),s=I.height(e),s-=(u=a.$childNodesScope?a.$childNodesScope.$element:null)?I.height(u):0,s=Y.appendChildOnHover?.25*s:I.height(e)/2,s=p.pageY<c.top+s,a.$parentNodesScope.accept(m,a.index())?s?(e[0].parentNode.insertBefore(g[0],e[0]),h.moveTo(a.$parentNodesScope,a.siblings(),a.index())):Y.appendChildOnHover&&a.accept(m,a.childNodesCount())?(a.$childNodesScope.$element.prepend(g),h.moveTo(a.$childNodesScope,a.childNodes(),0),S=!0):(e.after(g),h.moveTo(a.$parentNodesScope,a.siblings(),a.index()+1)):!s&&a.accept(m,a.childNodesCount())&&(a.$childNodesScope.$element.append(g),h.moveTo(a.$childNodesScope,a.childNodes(),a.childNodesCount())))}m.$apply(function(){m.$treeScope.$callbacks.dragMove(h.eventArgs(N,$))})}},l=function(e){var n=h.eventArgs(N,$);e.preventDefault(),C(),W.cancel(m.expandTimeout),m.$treeScope.$apply(function(){q.when(m.$treeScope.$callbacks.beforeDrop(n)).then(function(e){!1!==e&&m.$$allowNodeDrop?(h.apply(),m.$treeScope.$callbacks.dropped(n)):p()}).catch(function(){p()}).finally(function(){i.replaceWith(m.$element),g.remove(),b&&(b.remove(),b=null),m.$treeScope.$callbacks.dragStop(n),m.$$allowNodeDrop=!1,h=null;var e=document.body.getAttribute("ui-tree-cursor");null!==e&&(L.find("body").css({cursor:e}),document.body.removeAttribute("ui-tree-cursor"))})})},r=function(e){m.dragEnabled()&&t(e)},d=function(e){o(e)},c=function(e){m.$$allowNodeDrop=!0,l(e)},s=function(e){l(e)},u={exec:function(e,n){n=n||0,this.cancel(),O=W(e,n)},cancel:function(){W.cancel(O)}},T=function(e){27===e.keyCode&&c(e)},(p=function(){a.bind("touchstart mousedown",function(e){0<m.dragDelay?u.exec(function(){r(e)},m.dragDelay):r(e)}),a.bind("touchend touchcancel mouseup",function(){0<m.dragDelay&&u.cancel()})})(),x=function(){angular.element(L).bind("touchend",c),angular.element(L).bind("touchcancel",c),angular.element(L).bind("touchmove",d),angular.element(L).bind("mouseup",c),angular.element(L).bind("mousemove",d),angular.element(L).bind("mouseleave",s),angular.element(L).bind("keydown",T)},C=function(){angular.element(L).unbind("touchend",c),angular.element(L).unbind("touchcancel",c),angular.element(L).unbind("touchmove",d),angular.element(L).unbind("mouseup",c),angular.element(L).unbind("mousemove",d),angular.element(L).unbind("mouseleave",s),angular.element(L).unbind("keydown",T)}}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNodes",["treeConfig","$window",function(i){return{require:["ngModel","?^uiTreeNode","^uiTree"],restrict:"A",scope:!0,controller:"TreeNodesController",link:function(n,e,t,o){var l={},r=o[0],a=o[1],o=o[2];angular.extend(l,i),l.nodesClass&&e.addClass(l.nodesClass),a?(a.scope.$childNodesScope=n).$nodeScope=a.scope:o.scope.$nodesScope=n,n.$treeScope=o.scope,r&&(r.$render=function(){n.$modelValue=r.$modelValue}),n.$watch(function(){return t.maxDepth},function(e){"number"==typeof e&&(n.maxDepth=e)}),n.$watch(function(){return t.nodropEnabled},function(e){void 0!==e&&(n.nodropEnabled=!0)},!0)}}}])}(),function(){"use strict";angular.module("ui.tree").factory("UiTreeHelper",["$document","$window","treeConfig",function(t,o,n){return{nodesData:{},setNodeAttribute:function(e,n,t){if(!e.$modelValue)return null;var o=this.nodesData[e.$modelValue.$$hashKey];o||(this.nodesData[e.$modelValue.$$hashKey]=o={}),o[n]=t},getNodeAttribute:function(e,n){if(!e.$modelValue)return null;e=this.nodesData[e.$modelValue.$$hashKey];return e?e[n]:null},nodrag:function(e){return void 0!==e.attr("data-nodrag")&&"false"!==e.attr("data-nodrag")},eventObj:function(e){var n=e;return void 0!==e.targetTouches?n=e.targetTouches.item(0):void 0!==e.originalEvent&&void 0!==e.originalEvent.targetTouches&&(n=e.originalEvent.targetTouches.item(0)),n},dragInfo:function(e){return{source:e,sourceInfo:{cloneModel:!0===e.$treeScope.cloneEnabled?angular.copy(e.$modelValue):void 0,nodeScope:e,index:e.index(),nodesScope:e.$parentNodesScope},index:e.index(),siblings:e.siblings().slice(0),parent:e.$parentNodesScope,resetParent:function(){this.parent=e.$parentNodesScope},moveTo:function(e,n,t){this.parent=e,this.siblings=n.slice(0);n=this.siblings.indexOf(this.source);-1<n&&(this.siblings.splice(n,1),this.source.index()<t&&t--),this.siblings.splice(t,0,this.source),this.index=t},parentNode:function(){return this.parent.$nodeScope},prev:function(){return 0<this.index?this.siblings[this.index-1]:null},next:function(){return this.index<this.siblings.length-1?this.siblings[this.index+1]:null},isClone:function(){return!0===this.source.$treeScope.cloneEnabled},clonedNode:function(e){return angular.copy(e)},isDirty:function(){return this.source.$parentNodesScope!=this.parent||this.source.index()!=this.index},isForeign:function(){return this.source.$treeScope!==this.parent.$treeScope},eventArgs:function(e,n){return{source:this.sourceInfo,dest:{index:this.index,nodesScope:this.parent},elements:e,pos:n}},apply:function(){var e=this.source.$modelValue;this.parent.nodropEnabled||this.parent.$treeScope.nodropEnabled||this.isDirty()&&(this.isClone()&&this.isForeign()?this.parent.insertNode(this.index,this.sourceInfo.cloneModel):(this.source.remove(),this.parent.insertNode(this.index,e)))}}},height:function(e){return e.prop("scrollHeight")},width:function(e){return e.prop("scrollWidth")},offset:function(e){var n=e[0].getBoundingClientRect();return{width:e.prop("offsetWidth"),height:e.prop("offsetHeight"),top:n.top+(o.pageYOffset||t[0].body.scrollTop||t[0].documentElement.scrollTop),left:n.left+(o.pageXOffset||t[0].body.scrollLeft||t[0].documentElement.scrollLeft)}},positionStarted:function(e,n){var t={},o=e.pageX,l=e.pageY;return e.originalEvent&&e.originalEvent.touches&&0<e.originalEvent.touches.length&&(o=e.originalEvent.touches[0].pageX,l=e.originalEvent.touches[0].pageY),t.offsetX=o-this.offset(n).left,t.offsetY=l-this.offset(n).top,t.startX=t.lastX=o,t.startY=t.lastY=l,t.nowX=t.nowY=t.distX=t.distY=t.dirAx=0,t.dirX=t.dirY=t.lastDirX=t.lastDirY=t.distAxX=t.distAxY=0,t},positionMoved:function(e,n,t){var o=e.pageX,l=e.pageY;if(e.originalEvent&&e.originalEvent.touches&&0<e.originalEvent.touches.length&&(o=e.originalEvent.touches[0].pageX,l=e.originalEvent.touches[0].pageY),n.lastX=n.nowX,n.lastY=n.nowY,n.nowX=o,n.nowY=l,n.distX=n.nowX-n.lastX,n.distY=n.nowY-n.lastY,n.lastDirX=n.dirX,n.lastDirY=n.dirY,n.dirX=0===n.distX?0:0<n.distX?1:-1,n.dirY=0===n.distY?0:0<n.distY?1:-1,l=Math.abs(n.distX)>Math.abs(n.distY)?1:0,t)return n.dirAx=l,void(n.moving=!0);n.dirAx!==l?(n.distAxX=0,n.distAxY=0):(n.distAxX+=Math.abs(n.distX),0!==n.dirX&&n.dirX!==n.lastDirX&&(n.distAxX=0),n.distAxY+=Math.abs(n.distY),0!==n.dirY&&n.dirY!==n.lastDirY&&(n.distAxY=0)),n.dirAx=l},elementIsTreeNode:function(e){return void 0!==e.attr("ui-tree-node")},elementIsTreeNodeHandle:function(e){return void 0!==e.attr("ui-tree-handle")},elementIsTree:function(e){return void 0!==e.attr("ui-tree")},elementIsTreeNodes:function(e){return void 0!==e.attr("ui-tree-nodes")},elementIsPlaceholder:function(e){return e.hasClass(n.placeholderClass)},elementIsDropzone:function(e){return e.hasClass(n.dropzoneClass)},elementContainsTreeNodeHandler:function(e){return 1<=e[0].querySelectorAll("[ui-tree-handle]").length},treeNodeHandlerContainerOfElement:function(e){return function(e,n){if(void 0===n)return null;var t=n.parentNode,o="function"==typeof t.setAttribute&&t.hasAttribute(e)?t:null;for(;t&&"function"==typeof t.setAttribute&&!t.hasAttribute(e);){if(t=t.parentNode,(o=t)===document.documentElement){o=null;break}0}return o}("ui-tree-handle",e[0])}}}])}();